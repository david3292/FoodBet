<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core">
    <ui:composition template="plantillas/template1.xhtml">
        <ui:define name="content">
            <h:form id="form">
                <p:growl id="growl" showDetail="true" sticky="true" /> 
                <p:messages id="msjError" showDetail="true" closable="true" autoUpdate="true"></p:messages>
                <p:tabView id="tabAdm" dynamic="true" cache="false" orientation="left" style="width: 1140px">

                    <p:tab title="Restaurantes">
                        <!--Tabla restaurantes-->
                        <p:outputPanel id="botonesR">
                            <p:commandButton value="Nuevo" actionListener="#{restauranteBean.nuevo()}"  onclick="PF('dlgRestaurant').show();" />
                            <p:commandButton value="Actualizar" actionListener="#{restauranteBean.actualizar()}" update=":form:restDetail" onclick="PF('dlgRestaurant').show();"/>
                        </p:outputPanel>
                        <p:dataTable id="restaurantes" 
                                     var="rest" value="#{restauranteBean.restaurantes}" 
                                     selectionMode="single" 
                                     selection="#{restauranteBean.restSelected}" 
                                     rowKey="#{rest.codRestaurante}">
                            <f:facet name="header"> Restaurantes </f:facet>
                            <p:ajax event="rowSelect" listener="#{restauranteBean.onRowSelect}" update=":form :form:growl" />
                            <p:ajax event="rowUnselect" listener="#{restauranteBean.onRowUnselect}" update=":form:growl" />
                            <p:column headerText="Nombre">
                                <h:outputText value="#{rest.nombre}" />
                            </p:column>
                            <p:column headerText="Direccion">
                                <h:outputText value="#{rest.direccion}" />
                            </p:column>
                            <p:column headerText="Telefono1">
                                <h:outputText value="#{rest.telefono1}" />
                            </p:column>
                            <p:column headerText="Telefono2">
                                <h:outputText value="#{rest.telefono2}" />
                            </p:column>
                            <p:column headerText="Especialidad">
                                <h:outputText value="#{rest.especialidad}" />
                            </p:column>
                        </p:dataTable>
                        
                        <!--Tabla Sucursales-->
                        <p:outputPanel id="botonesS">
                            <p:commandButton value="Nuevo" actionListener="#{restauranteBean.nuevaSucursal()}"  onclick = "PF('dlgSucursal').show();" />
                            <p:commandButton value="Actualizar" actionListener="#{restauranteBean.actualizarSucursal()}" update=":form:sucursalDetail" onclick="PF('dlgSucursal').show();"/>
                        </p:outputPanel>
                        <p:dataTable id="sucursales" 
                                     var="sucursal" value="#{restauranteBean.restSelected.sucursales}" 
                                     selectionMode="single" 
                                     selection="#{restauranteBean.sucursalSelected}" 
                                     rowKey="#{sucursal.codSucursal}">
                            <f:facet name="header"> Sucursales </f:facet>
                            <p:ajax event="rowSelect" listener="#{restauranteBean.onRowSucursalSelect}" update=":form:growl" />
                            <p:ajax event="rowUnselect" listener="#{restauranteBean.onRowUnselect}" update=":form:growl" />
                            <p:column headerText="Direccion">
                                <h:outputText value="#{sucursal.direccion}" />
                            </p:column>
                            <p:column headerText="Telefono1">
                                <h:outputText value="#{sucursal.telefono1}" />
                            </p:column>
                            <p:column headerText="Telefono2">
                                <h:outputText value="#{sucursal.telefono2}" />
                            </p:column>                            
                        </p:dataTable>
                        
                        <!--Tabla Menus-->
                        <p:outputPanel id="botonesM">
                            <p:commandButton value="Nuevo" actionListener="#{restauranteBean.nuevo}"  onclick="PF('dlgRestaurant').show();" />
                            <p:commandButton value="Actualizar" actionListener="#{restauranteBean.actualizar}" update=":form:sucursalDetail" onclick="PF('dlgSucursal').show();"/>
                        </p:outputPanel>
                        <p:dataTable id="menus" 
                                     var="menu" value="#{restauranteBean.restSelected.menus}" 
                                     selectionMode="single" 
                                     selection="#{restauranteBean.menuSelected}" 
                                     rowKey="#{menu.codMenu}">
                            <f:facet name="header"> Menus </f:facet>
                            <p:ajax event="rowSelect" listener="#{restauranteBean.onRowSelect}" update=":form:growl" />
                            <p:ajax event="rowUnselect" listener="#{restauranteBean.onRowUnselect}" update=":form:growl" />
                            <p:column headerText="Nombre">
                                <h:outputText value="#{menu.nombre}" />
                            </p:column>
                            <p:column headerText="Precio">
                                <h:outputText value="#{menu.precio}" />
                            </p:column>
                            <p:column headerText="Descripcion">
                                <h:outputText value="#{menu.descripcion}" />
                            </p:column>                            
                        </p:dataTable>
                        
                    </p:tab>

                    <p:tab title="Equipo">

                    </p:tab>
                    <p:tab title="Evento Deportivo">

                    </p:tab>
                    <p:tab title="Usuario">

                    </p:tab>
                </p:tabView>
                <!--Formulario restaurante-->
                <p:dialog header="Formulario Restaurante" widgetVar="dlgRestaurant" id="dlgRestaurant" modal="true" showEffect="fade" hideEffect="fade" resizable="false">
                    <p:panelGrid id="restDetail" columns="2" styleClass="noBorders" style="text-align:center; height: 200px!important; width: 500px">
                        Nombre
                        <h:inputText id="txtNombreRA" value="#{restauranteBean.nombre}"/>
                        Direccion
                        <h:inputText id="txtDescripcionRA" value="#{restauranteBean.direccion}" />
                        Telefono
                        <h:inputText id="txtTelefonoRA" value="#{restauranteBean.telefono}" />
                        Telefono Secundario
                        <h:inputText id="txtTelefonoSecundarioRA" value="#{restauranteBean.telefonoSecundario}" />
                        Especialidad
                        <h:inputText id="txtEspecialidadRA" value="#{restauranteBean.especialidad}"/>
                    </p:panelGrid>
                    <p:commandButton id="btnAceptarRestaurant" value="Aceptar"
                                     actionListener="#{restauranteBean.aceptar()}"
                                     update=":form" onclick="dlgRestaurant.hide()">
                    </p:commandButton>
                    <p:commandButton id="btnCancelarRestaurant" value="Cancelar"
                                     actionListener="#{restauranteBean.cancelar()}"
                                     update="@form" onclick="dlgRestaurant.hide()">
                    </p:commandButton>
                </p:dialog>
                
                <!--Formulario sucursal-->
                <p:dialog header="Formulario Sucursal" widgetVar="dlgSucursal" id="dlgSucursal" modal="true" showEffect="fade" hideEffect="fade" resizable="false">
                    <p:panelGrid id="sucursalDetail" columns="2" styleClass="noBorders" style="text-align:center; height: 200px!important; width: 500px">
                        Direccion
                        <h:inputText id="txtDireccionS" value="#{restauranteBean.dirSucursal}"/>
                        Telefono1
                        <h:inputText id="txtTelefono1S" value="#{restauranteBean.tel1Sucursal}" />
                        Telefono2
                        <h:inputText id="txtTelefono2S" value="#{restauranteBean.tel2Sucursal}" />
                    </p:panelGrid>
                    <p:commandButton id="btnAceptarSucursal" value="Aceptar"
                                     actionListener="#{restauranteBean.aceptarSucursal()}"
                                     update="@form" onclick="dlgSucursal.hide()">
                    </p:commandButton>
                    <p:commandButton id="btnCancelarSucursal" value="Cancelar"
                                     actionListener="#{restauranteBean.cancelarSucursal()}"
                                     update="@form" onclick="dlgSucursal.hide()">
                    </p:commandButton>
                </p:dialog>
            </h:form>
        </ui:define>
    </ui:composition>
</html>
